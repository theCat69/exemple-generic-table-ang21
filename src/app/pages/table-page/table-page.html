<main>
  <div class="card">
    <form (submit)="submit($event)">
      <app-table [datas]="elementData" [(formModel)]="perdiocElementModel" [formValid]="!formTree().invalid()"
      (saveEvent)="saveEvent($event)"
      >
        <app-table-toolbar>
          <ng-template let-elems let-displayedColumns="displayedColumns">
            <button mat-button (click)="globalAction(elems())">globale action !</button>
            <button mat-button (click)="displayedColumnsLog(displayedColumns())">
              displayd columns!
            </button>
          </ng-template>
        </app-table-toolbar>

        <app-column prop="name" label="NameLabel" sortable width="40%" [field]="formTree.name" editable >
          <ng-template #cell let-elem>
            {{ elem().name }}
          </ng-template>
        </app-column>

        <app-column prop="position" [field]="formTree.position" sortable editable />

        <app-column prop="weight|symbol" styleHeaderBgColor="green" [field]="formTree.weight">
          <ng-template #cellHeader> Weigth and symbols </ng-template>
          <ng-template #cell let-elem>
            <div class="flex-container">
              <div [style]="{ 'background-color': 'blue' }">
                {{ elem().weight }}
              </div>
              <div>
                {{ elem().symbol }}
              </div>
            </div>
          </ng-template>
        </app-column>

        <app-predefined-template prop="symbol" [field]="formTree.symbol" editable />

        <app-column
          prop="subElem"
          [valueAccessor]="subElemntAccessor"
          sortable
          [field]="formTree.subElemnt.subValue"
        />

        <app-column prop="action" styleHeaderBgColor="cyan" [draggable]="false" maxWidth="180px">
          <ng-template
            #cell
            let-elem
            let-activateEdit="activateEdit"
            let-saveEdit="saveEdit"
            let-cancelEdit="cancelEdit"
          >
            <div class="flex-container">
              <button mat-button (click)="myAction(elem)">action !</button>
              <app-edit-button-tray
                [elem]="elem()"
                [isFormValid]="!formTree().invalid()"
                (activateEdit)="activateEdit($event)"
                (saveEdit)="saveEdit($event)"
                (cancelEdit)="cancelEdit($event)"
              />
            </div>
          </ng-template>
        </app-column>
      </app-table>
    </form>
  </div>
</main>

